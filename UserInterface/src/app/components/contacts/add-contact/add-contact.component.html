<div class="page-header pb-0 flex-column align-items-start">
    <ul class="breadcrumbs mb-3" style="margin-left: 0; padding-left: 0; border: none;">
        <li class="nav-item">
            <a [routerLink]="'/dashboard'"><i class=" icon-home"></i></a>
        </li>
        <li class="separator">
            <i class="icon-arrow-right"></i>
        </li>
        <li class="nav-item">
            <a [routerLink]="'/list-contacts'">Contact List</a>
        </li>
        <li class="separator">
            <i class="icon-arrow-right"></i>
        </li>
        <li class="nav-item">
            <a [routerLink]="'/add-contact'">{{ editMode ? 'Update Contact':'Create Contact'}} </a>
        </li>
    </ul>
    <h3 class="fw-bold mb-3">{{ editMode ? 'Update Contact':'Create Contact'}}</h3>
</div>
<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header">
        <h5>{{ editMode ? 'Update' : 'Add' }} Contact</h5>
      </div>
      <div class="card-body">
        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
          <div class="row">

            <!-- Contact Name -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="contactName">Contact Name<span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="contactName"
                  placeholder="Enter Contact Name" formControlName="contactName">
                <div *ngIf="contactForm.get('contactName')?.invalid && contactForm.get('contactName')?.touched">
                  <span class="text-danger">Name is required and must contain only letters.</span>
                </div>
              </div>
            </div>

            <!-- Contact Email -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="contactEmail">Contact Email<span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="contactEmail"
                  placeholder="Enter Email" formControlName="contactEmail">
                <div *ngIf="contactForm.get('contactEmail')?.invalid && contactForm.get('contactEmail')?.touched">
                  <span class="text-danger">A valid email address is required.</span>
                </div>
                <small class="form-text text-muted">We'll never share your email with anyone else.</small>
              </div>
            </div>

            <!-- Contact Mobile -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="contactMobile">Contact Mobile<span class="text-danger">*</span></label>
                <div class="input-group">
                  <select class="form-select" formControlName="contactMobileCode" style="max-width: 100px;">
                    <option value="" disabled>Select</option>
                    <option *ngFor="let c of countryCodes" [value]="c.code">{{ c.name }} ({{ c.code }})</option>
                  </select>
                  <input type="tel" class="form-control" formControlName="contactMobile"
                    placeholder="Enter phone number" maxlength="15" pattern="[0-9]*"
                    (keypress)="allowOnlyNumbers($event)">
                </div>
                <div *ngIf="contactForm.get('contactMobileCode')?.invalid && contactForm.get('contactMobileCode')?.touched">
                  <span class="text-danger">Country code is required.</span>
                </div>
                <div *ngIf="contactForm.get('contactMobile')?.errors?.['required'] && contactForm.get('contactMobile')?.touched">
                  <span class="text-danger">Mobile number is required.</span>
                </div>
                <div *ngIf="contactForm.get('contactMobile')?.errors?.['pattern'] && contactForm.get('contactMobile')?.touched">
                  <span class="text-danger">Only numbers allowed (7–15 digits).</span>
                </div>
              </div>
            </div>

            <!-- WhatsApp Number -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="contactWhatsApp">Contact WhatsApp Number<span class="text-danger">*</span></label>
                <div class="input-group">
                  <select class="form-select" formControlName="contactWhatsAppCode" style="max-width: 100px;">
                    <option value="" disabled>Select</option>
                    <option *ngFor="let c of countryCodes" [value]="c.code">{{ c.name }} ({{ c.code }})</option>
                  </select>
                  <input type="tel" class="form-control" formControlName="contactWhatsApp"
                    placeholder="Enter WhatsApp number" maxlength="15" pattern="[0-9]*"
                    (keypress)="allowOnlyNumbers($event)">
                </div>
                <div *ngIf="contactForm.get('contactWhatsAppCode')?.invalid && contactForm.get('contactWhatsAppCode')?.touched">
                  <span class="text-danger">Country code is required.</span>
                </div>
                <div *ngIf="contactForm.get('contactWhatsApp')?.errors?.['pattern'] && contactForm.get('contactWhatsApp')?.touched">
                  <span class="text-danger">Only numbers allowed (7–15 digits).</span>
                </div>
              </div>
            </div>

          </div>

          <!-- Submit and Cancel -->
          <div class="d-flex gap-3 mt-3">
            <button type="submit" class="btn btn-primary" [disabled]="contactForm.invalid">
              {{ editMode ? 'Update' : 'Create' }} Contact
            </button>
            <button type="button" class="btn btn-secondary" [routerLink]="'/list-contacts'">
              Back to List
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
